<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tm.board.notice.dao.IBoardNoticeDao">

	<sql id="b_code">
		"n"
	</sql> 

	<insert id="insertBoardNotice" parameterType="boardVo">
		insert into board (b_code, b_loc_category, b_sub_category,
		 b_title, b_start_date, b_end_date, userid) 
		 values(<include refid="b_code"></include>, 0, 0, #{b_title}, 0, 0,  “admin”)
	</insert>
	
	<insert id="insertContentsNotice" parameterType="contentsVo">
		insert into contents values(0, #{b_idx}, #{ct_num}, #{ct_contents})
	</insert>
	
	<update id="updateBoardNotice" parameterType="boardVo">
		update board set b_code=#{b_code}, b_loc_category=#{b_loc_category}, 
		b_sub_category=#{b_sub_category},  b_title=#{b_title}, 
		b_start_date=#{b_start_date}, b_end_date=#{b_end_date}, 
		 userid=#{userid} where b_idx=#{b_idx}
	</update>
	
	<update id="updateContentsNotice" parameterType="contentsVo">
		update contents set ct_contents=#{ct_contents} where b_idx=#{b_idx}
	</update>
	
	<delete id="deleteBoardNotice" parameterType="int">
		delete from board where b_idx=#{b_idx}
	</delete>
	
	<delete id="deleteContentsNotice" parameterType="int">
		delete from contents where b_idx=#{b_idx}
	</delete>
	
	<select id="selectNoticeOne" parameterType="int" resultType="boardVo">
		select * from board where b_idx=#{b_idx}
	</select>
	
	<select id="selectContentsNoticeOne" parameterType="int" resultType="contentsVo">
		select * from contents where b_idx=#{b_idx}
	</select>
	
	<select id="selectNoticeBySearch" parameterType="String" 
		resultType="boardVo">
		select * from board where b_code='n' and b_title like '%${b_title}%' order by b_date desc
	</select>
	
	<select id="selectNoticeByCode" resultType="boardVo">
		select * from board 
		where b_code=<include refid="b_code"></include> order by b_idx desc
	</select>
	
	<select id="selectNoticeByLimit" parameterType="java.util.HashMap" resultType="boardVo">
		select * from board where
		 b_code=<include refid="b_cdoe"></include> 
		 order by b_idx desc limit #{skip}, #{count}
	</select>
	
	<select id="getCountNotice" resultType="int">
		select count(*) from board
		 where b_code=<include refid="b_code"></include>
	</select>


</mapper>